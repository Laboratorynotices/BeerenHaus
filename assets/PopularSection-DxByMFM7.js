import{d as $,c as D,a as c,t as m,e as I,b as w,r as f,f as N,o as S,n as A,g as O,w as T,u as j,h as q,F as H,i as W,j as x}from"./index-d8hzgMeY.js";import{u as F}from"./useNumberToPrice-BN01Ok19.js";const M="/BeerenHaus/assets/blueberries-CZy58X8s.png",Q="/BeerenHaus/assets/leaf-aFDO01Qb.png",U="/BeerenHaus/assets/raspberries-erfuD_Pr.png",V="/BeerenHaus/assets/strawberries-BpMmquse.png",Y=["aria-label"],Z={class:"popular__images shaped"},G={class:"deco1"},J=["src","alt"],K={class:"popular__data"},ee={class:"popular__name"},te={class:"popular__description"},se=["href"],ae=$({__name:"PopularCard",props:{product:{},anchor:{}},setup(n){const{numberToPrice:s}=F(),e=Object.assign({"../../assets/imgs/popular/blueberries.png":M,"../../assets/imgs/popular/leaf.png":Q,"../../assets/imgs/popular/raspberries.png":U,"../../assets/imgs/popular/strawberries.png":V}),o=a=>{const i=Object.entries(e).find(([v])=>v.endsWith(a));return i?i[1]:""};return(a,i)=>(w(),D("article",{class:"popular__card swiper-slide","aria-label":a.product.name},[c("div",Z,[c("div",G,[c("img",{src:o(a.product.image),alt:a.$t("cap with")+" "+a.product.name,role:"none",class:"popular__img",loading:"lazy"},null,8,J)])]),c("div",K,[c("h2",ee,m(a.product.name),1),c("p",te,m(a.product.description),1),c("a",{href:"#"+a.anchor,class:"button"},m(a.$t("Order now"))+": â‚¬"+m(I(s)(a.product.price)),9,se)])],8,Y))}});function re(n=3){const s=f(null),e=f(null),o=f(!1),a=f(0),i=f(0),v=f(0),l=f(0);let _=0,r=0;const y=N(()=>r===0?0:(l.value%r+r)%r),h=()=>{e.value&&(i.value=l.value*-_,e.value.style.transform=`translateX(${i.value}px)`)},k=()=>{e.value&&(e.value.style.transition="transform 0.3s ease-out",h())},R=()=>{if(!s.value||!e.value)return;const t=Array.from(e.value.children).filter(d=>!d.classList.contains("clone"));if(r=t.length,r===0)return;const u=t[0],p=parseInt(getComputedStyle(e.value).gap)||20;_=u.offsetWidth+p},z=()=>{if(!e.value||r===0)return;e.value.querySelectorAll(".clone").forEach(u=>u.remove());const t=Array.from(e.value.children).filter(u=>!u.classList.contains("clone"));for(let u=0;u<n;u++)t.forEach(p=>{const d=p.cloneNode(!0);d.classList.add("clone"),d.setAttribute("aria-hidden","true"),e.value.appendChild(d)}),t.slice().reverse().forEach(p=>{const d=p.cloneNode(!0);d.classList.add("clone"),d.setAttribute("aria-hidden","true"),e.value.insertBefore(d,e.value.firstChild)});l.value=r*n,h()},B=()=>{e.value&&(l.value<r?(l.value+=r*n,e.value.style.transition="none",h()):l.value>=r*(n+1)&&(l.value-=r*n,e.value.style.transition="none",h()))},g=t=>{e.value&&(o.value=!0,a.value="touches"in t?t.touches[0].clientX:t.clientX,v.value=i.value,e.value.style.transition="none",s.value&&(s.value.style.cursor="grabbing"),t.preventDefault())},b=t=>{if(!o.value||!e.value)return;const p=("touches"in t?t.touches[0].clientX:t.clientX)-a.value;i.value=v.value+p,e.value.style.transform=`translateX(${i.value}px)`,t.preventDefault()},L=()=>{if(!o.value||!e.value)return;o.value=!1,s.value&&(s.value.style.cursor="grab");const t=i.value-v.value,u=Math.round(t/_);u!==0&&(l.value-=u),k()},X=()=>{o.value||(l.value+=1,k())},C=()=>{o.value||(l.value-=1,k())},P=t=>{o.value||(t.preventDefault(),t.deltaX>0||t.deltaY>0?X():C())},E=()=>{R(),r>0&&z()};return S(()=>{A(()=>{!s.value||!e.value||(E(),s.value.addEventListener("mousedown",g),document.addEventListener("mousemove",b),document.addEventListener("mouseup",L),s.value.addEventListener("touchstart",g,{passive:!1}),document.addEventListener("touchmove",b,{passive:!1}),document.addEventListener("touchend",L),s.value.addEventListener("wheel",P,{passive:!1}),window.addEventListener("resize",E),e.value.addEventListener("transitionend",B),s.value.addEventListener("contextmenu",t=>{o.value&&t.preventDefault()}),s.value.addEventListener("selectstart",t=>t.preventDefault()))})}),O(()=>{s.value&&(s.value.removeEventListener("mousedown",g),s.value.removeEventListener("touchstart",g),s.value.removeEventListener("wheel",P),document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",L),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",L),window.removeEventListener("resize",E),e.value&&e.value.removeEventListener("transitionend",B))}),{carouselRef:s,wrapperRef:e,isDragging:o,slideNext:X,slidePrev:C,updateCarousel:E,currentIndex:l,realIndex:y}}const ne=["id","aria-label"],oe={class:"wrap-container",role:"none"},le={class:"section__title"},ce=$({__name:"PopularSection",props:{block:{type:Object,required:!0},id:{type:String,required:!0}},setup(n){const s=n,{carouselRef:e,wrapperRef:o,isDragging:a,updateCarousel:i}=re();T(()=>s.block.props.products,()=>{A(()=>{i()})},{deep:!0});const{animate:v}=j({origin:"top",distance:"60px",duration:2e3,delay:300});return S(()=>{v(".popular__swiper")}),(l,_)=>(w(),D("section",{id:n.id,class:"popular section","aria-label":l.$t("Popular section")},[c("div",oe,[c("h2",le,m(n.block.props.title),1),c("div",{ref_key:"carouselRef",ref:e,class:q(["popular__swiper swiper",{"is-dragging":I(a)}])},[c("div",{class:"swiper-wrapper",ref_key:"wrapperRef",ref:o},[(w(!0),D(H,null,W(n.block.props.products,(r,y)=>(w(),x(ae,{key:y,product:r,anchor:n.block.props.anchor?n.block.props.anchor:"",class:"popular__slide"},null,8,["product","anchor"]))),128))],512)],2)])],8,ne))}});export{ce as default};
